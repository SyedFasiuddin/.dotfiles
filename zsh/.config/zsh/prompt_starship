PROMPT_ALTERNATIVE=oneline

configure_prompt() {
    case "$PROMPT_ALTERNATIVE" in
        twoline)
            export STARSHIP_CONFIG=""
            eval "$(starship init zsh)"
            ;;
        oneline)
            export STARSHIP_CONFIG="$XDG_CONFIG_HOME/starship.toml"
            eval "$(starship init zsh)"
            ;;
    esac
}

toggle_oneline_prompt(){
    if [ "$PROMPT_ALTERNATIVE" = oneline ]; then
        PROMPT_ALTERNATIVE=twoline
    else
        PROMPT_ALTERNATIVE=oneline
    fi

    configure_prompt
    zle reset-prompt
}

zle -N toggle_oneline_prompt
bindkey ^P toggle_oneline_prompt

configure_prompt

# vim: set ft=sh:
